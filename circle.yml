machine:
  node:
    version: 4.2.6
  pre:
    - sudo curl -L -o /usr/bin/docker 'https://s3.amazonaws.com/circle-downloads/docker-1.9.1-circleci'
    - sudo chmod 0755 /usr/bin/docker
  services:
    - docker

dependencies:
  override:
    - mvn package docker:build

test:
  override:
    - "docker run -p 8080:8080 -t pawanjashnani/workspace:latest"
    - "curl --retry 10 --retry-delay 5 -v http://192.168.99.100:8080"

deployment:
  pipeline:
    branch: "master"
    commands:
      - docker login -e pawanjashnani@gmail.com -u pawanjashnani -p Btech@2017
      - "docker images"
      - "docker push pawanjashnani/workspace:latest"